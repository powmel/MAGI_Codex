---
description: コマンド「チャット中にユーザーが言及された継続的適用ルールを検出し、再利用可能なパターンとして表現して、適切なドキュメントの更新を提案する」
---

# docs/development-workflows/suggest-docs-updates.md

## 指示

チャット中にユーザーが言及した「プロジェクトで継続的に適用すべき内容」を検出し、再利用可能なパターンとして表現して、適切なドキュメントの更新を提案してください

## 文脈情報

このドキュメントは、チャット中にユーザーが示唆・要求・提示・言及した「コーディング規約」「技術選択」「実装パターン」「ドメイン知識」「ワークフロー」などの継続的適用ルールを自動検出し、適切なドキュメント更新を提案するためのガイドラインです。
このような、実装やチャットのやり取りからドキュメントを更新する手法を、リバースナレッジと呼びます。

## ルール

- チャット履歴から継続的適用が必要な内容を正確に検出すること
- 既存ドキュメントとの重複を避け、新しい内容のみを対象とすること
- 適切なドキュメントファイルを特定し、具体的な更新提案を行うこと
- **具体的なパスや機能名を抽象化し、再利用可能なパターンとして表現すること**
- **前回・今回・次回と継続して適用できる汎用的なルールにすること**

## 手順

1. チャット履歴を分析し、以下の継続的適用が必要な内容を検出する：
   - 「常に◯◯して」「これをルールに記載して」などの継続適用を示す表現
   - コーディング規約に関する言及
   - 技術選択や実装パターンの指示
   - ドメイン知識や業務ルールの説明
   - ワークフローの改善提案
   - 修正が必要だった内容のうち、上記の内容を含むもの
2. **検出した内容を汎用化・抽象化する**
3. 検出した継続的適用が必要な内容を分類する：
   - `coding-rules/`: プログラムの書き方、実装ルール
   - `development-workflows/`: 開発フロー、Git操作、レビュー等
   - `domain-knowledges/`: 仕様書、用語集、業務ルール
4. 分類した内容を、docs/ 配下のドキュメントを確認し、同じ内容が記載されているものを除外する
5. **再利用可能なパターンとして内容をブラッシュアップ**し、対象ドキュメントを決定する
6. ユーザーに汎用化されたルールを表示し、「これを標準のルールにしますか？」と確認する
7. YES回答を得た場合、対象ドキュメントファイルに汎用化されたルールを upsert する

## 出力形式

- マークダウン形式で出力してください
- 検出結果は以下の構成で出力：
  - ## 検出された継続適用ルール（汎用的・再利用可能）
  - ## 分類と対象ドキュメント
  - ## 更新提案内容
  - ## 確認事項

## 入出力例 (Few-shots)

例1:
入力:
```
ユーザー: 「今後、全てのコンポーネントで hooks を使用してください」
```

出力:
```
## 検出された継続適用ルール（汎用的・再利用可能）

「全てのコンポーネントで hooks を使用する」というコーディング規約が言及されました。

## 分類と対象ドキュメント

- **分類**: coding-rules (コーディング規約)
- **対象ドキュメント**: docs/coding-rules/react-components.md

## 更新提案内容

React コンポーネントのルールセクションに以下を追加：
- 全てのコンポーネントで hooks ファイルを作成し、ロジックを分離すること

## 確認事項

これを標準のルールにしますか？
```

## 注意点

- 直近のチャット履歴を分析し、文脈を正確に理解すること
- 一時的な指示と継続的適用ルールを区別すること
- **具体的な機能名やパスを抽象化し、前回・今回・次回と継続して使える汎用的なルールにすること**
- 分からない場合は、分からないとしてください
